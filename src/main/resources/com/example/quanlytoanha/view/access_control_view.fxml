<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.layout.*?>

<VBox spacing="10.0" style="-fx-padding: 20; -fx-background-color: #f8f9fa;"
      xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.example.quanlytoanha.controller.AccessControlController">
    <children>
        <HBox alignment="CENTER_LEFT" spacing="10.0">
            <Label text="ðŸ›¡ï¸ KIá»‚M SOÃT AN NINH RA/VÃ€O (US8_1_1)"
                   style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #1e3c72;"/>
        </HBox>

        <TabPane VBox.vgrow="ALWAYS" tabClosingPolicy="UNAVAILABLE">
            <tabs>
                <Tab text="Ghi nháº­n Xe (AC1)">
                    <VBox spacing="15.0" style="-fx-padding: 20;">
                        <Label text="Ghi nháº­n Xe Ra/VÃ o" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                        <GridPane hgap="10" vgap="10">
                            <Label text="Biá»ƒn sá»‘ xe (*):" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                            <TextField fx:id="txtLicensePlate" promptText="VD: 29A-123.45" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                            <Label text="Loáº¡i xe:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                            <ComboBox fx:id="cmbVehicleType" promptText="Chá»n loáº¡i xe" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                            <Label text="Loáº¡i ra/vÃ o (*):" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                            <ComboBox fx:id="cmbAccessType" promptText="Chá»n IN hoáº·c OUT" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                            <Label text="Ghi chÃº:" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                            <TextField fx:id="txtVehicleNotes" promptText="VD: Giao hÃ ng cho cÄƒn há»™ 101" GridPane.columnIndex="1" GridPane.rowIndex="3"/>
                        </GridPane>
                        <Button fx:id="btnLogVehicle" text="Ghi nháº­n Xe" onAction="#handleLogVehicleAccess" styleClass="btn-primary"/>
                    </VBox>
                </Tab>

                <Tab text="Ghi nháº­n KhÃ¡ch (AC1)">
                    <VBox spacing="15.0" style="-fx-padding: 20;">
                        <Label text="Ghi nháº­n KhÃ¡ch (Äi bá»™)" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                        <GridPane hgap="10" vgap="10">
                            <Label text="TÃªn khÃ¡ch (*):" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                            <TextField fx:id="txtVisitorName" promptText="Nguyá»…n VÄƒn A" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                            <Label text="CCCD/CMND:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                            <TextField fx:id="txtVisitorIdCard" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                            <Label text="Äiá»‡n thoáº¡i:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                            <TextField fx:id="txtVisitorPhone" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                            <Label text="CÄƒn há»™ Ä‘áº¿n thÄƒm:" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                            <ComboBox fx:id="cmbVisitorApartment" promptText="Chá»n cÄƒn há»™ (náº¿u cÃ³)" GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                            <Label text="LÃ½ do:" GridPane.columnIndex="0" GridPane.rowIndex="4"/>
                            <TextField fx:id="txtVisitorReason" GridPane.columnIndex="1" GridPane.rowIndex="4"/>
                        </GridPane>
                        <Button fx:id="btnCheckInVisitor" text="Check-in KhÃ¡ch" onAction="#handleCheckInVisitor" styleClass="btn-success"/>
                    </VBox>
                </Tab>

                <Tab text="Tra cá»©u Lá»‹ch sá»­ (AC2)">
                    <VBox spacing="15.0" style="-fx-padding: 20;">
                        <Label text="Tra cá»©u Lá»‹ch sá»­ Ra/VÃ o" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>

                        <HBox spacing="10.0" alignment="BOTTOM_LEFT">
                            <VBox>
                                <Label text="Tá»« ngÃ y:" style="-fx-font-weight: bold;"/>
                                <DatePicker fx:id="dpSearchStartDate" prefWidth="150.0"/>
                            </VBox>
                            <VBox>
                                <Label text="Äáº¿n ngÃ y:" style="-fx-font-weight: bold;"/>
                                <DatePicker fx:id="dpSearchEndDate" prefWidth="150.0"/>
                            </VBox>
                            <Button fx:id="btnSearchLogs" text="Tra cá»©u" onAction="#handleSearchLogs" styleClass="btn-primary"/>
                        </HBox>

                        <TabPane VBox.vgrow="ALWAYS" tabClosingPolicy="UNAVAILABLE">
                            <tabs>
                                <Tab text="Lá»‹ch sá»­ Xe">
                                    <content>
                                        <VBox spacing="10" style="-fx-padding: 5;">
                                            <children>
                                                <TableView fx:id="tableVehicleLogs" VBox.vgrow="ALWAYS">
                                                    <columns>
                                                        <TableColumn text="Thá»i gian" prefWidth="150.0">
                                                            <cellValueFactory><PropertyValueFactory property="accessTime" /></cellValueFactory>
                                                        </TableColumn>
                                                        <TableColumn text="Loáº¡i" prefWidth="60.0">
                                                            <cellValueFactory><PropertyValueFactory property="accessType" /></cellValueFactory>
                                                        </TableColumn>
                                                        <TableColumn text="Biá»ƒn sá»‘" prefWidth="100.0">
                                                            <cellValueFactory><PropertyValueFactory property="licensePlate" /></cellValueFactory>
                                                        </TableColumn>
                                                        <TableColumn text="CÆ° dÃ¢n" prefWidth="150.0">
                                                            <cellValueFactory><PropertyValueFactory property="residentFullName" /></cellValueFactory>
                                                        </TableColumn>
                                                        <TableColumn text="Ghi chÃº" prefWidth="200.0">
                                                            <cellValueFactory><PropertyValueFactory property="notes" /></cellValueFactory>
                                                        </TableColumn>
                                                        <TableColumn text="Báº£o vá»‡" prefWidth="150.0">
                                                            <cellValueFactory><PropertyValueFactory property="guardFullName" /></cellValueFactory>
                                                        </TableColumn>
                                                    </columns>
                                                    <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                                                </TableView>

                                                <HBox alignment="CENTER_RIGHT" style="-fx-padding: 10 0 0 0;">
                                                    <Button fx:id="btnExportVehiclePDF" text="Xuáº¥t PDF (Xe)"
                                                            onAction="#handleExportVehicleLogPDF"
                                                            styleClass="btn-success" disable="true"/>
                                                </HBox>
                                            </children>
                                        </VBox>
                                    </content>
                                </Tab>

                                <Tab text="Lá»‹ch sá»­ KhÃ¡ch (Äi bá»™)">
                                    <content>
                                        <VBox spacing="10" style="-fx-padding: 5;">
                                            <children>
                                                <TableView fx:id="tableVisitorLogs" VBox.vgrow="ALWAYS">
                                                    <columns>
                                                        <TableColumn text="Check-in" prefWidth="150.0">
                                                            <cellValueFactory><PropertyValueFactory property="checkInTime" /></cellValueFactory>
                                                        </TableColumn>
                                                        <TableColumn text="Check-out" prefWidth="150.0">
                                                            <cellValueFactory><PropertyValueFactory property="checkOutTime" /></cellValueFactory>
                                                        </TableColumn>
                                                        <TableColumn text="TÃªn khÃ¡ch" prefWidth="150.0">
                                                            <cellValueFactory><PropertyValueFactory property="visitorName" /></cellValueFactory>
                                                        </TableColumn>
                                                        <TableColumn text="CÄƒn há»™" prefWidth="80.0">
                                                            <cellValueFactory><PropertyValueFactory property="apartmentId" /></cellValueFactory>
                                                        </TableColumn>
                                                        <TableColumn text="LÃ½ do" prefWidth="200.0">
                                                            <cellValueFactory><PropertyValueFactory property="reason" /></cellValueFactory>
                                                        </TableColumn>
                                                        <TableColumn text="Báº£o vá»‡" prefWidth="150.0">
                                                            <cellValueFactory><PropertyValueFactory property="guardFullName" /></cellValueFactory>
                                                        </TableColumn>
                                                    </columns>
                                                    <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                                                </TableView>

                                                <HBox alignment="CENTER_RIGHT" spacing="10" style="-fx-padding: 10 0 0 0;">
                                                    <Button fx:id="btnExportVisitorPDF" text="Xuáº¥t PDF (KhÃ¡ch)"
                                                            onAction="#handleExportVisitorLogPDF"
                                                            styleClass="btn-success" disable="true"/>

                                                    <Button fx:id="btnCheckOutSelectedVisitor" text="Check-out KhÃ¡ch Ä‘Ã£ chá»n"
                                                            onAction="#handleCheckOutSelectedVisitor"
                                                            styleClass="btn-warning" disable="true"/>
                                                </HBox>
                                            </children>
                                        </VBox>
                                    </content>
                                </Tab>
                            </tabs>
                        </TabPane>
                    </VBox>
                </Tab>
            </tabs>
        </TabPane>
    </children>
</VBox>