<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.layout.*?>

<VBox spacing="20.0" styleClass="root-container"
      stylesheets="@styles/maintenance_history_view_styles.css"
      xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.example.quanlytoanha.controller.MaintenanceHistoryController">

    <HBox alignment="CENTER_LEFT" spacing="15.0" styleClass="header-box">
        <Label text="ðŸ”§ QUáº¢N LÃ Lá»ŠCH Sá»¬ Báº¢O TRÃŒ" styleClass="page-title"/>
        <Region HBox.hgrow="ALWAYS" />
        <Button fx:id="btnReload" text="ðŸ”„ Táº£i láº¡i dá»¯ liá»‡u" onAction="#initialize"
                styleClass="action-button, btn-outline-primary"/>
    </HBox>

    <VBox spacing="15.0" styleClass="card-pane">
        <children>
            <Label text="ðŸ“… Láº­p lá»‹ch Báº£o trÃ¬ Má»›i" styleClass="section-title"/>

            <GridPane hgap="20" vgap="15">
                <columnConstraints>
                    <ColumnConstraints hgrow="NEVER" minWidth="100.0"/>
                    <ColumnConstraints hgrow="ALWAYS" minWidth="200.0"/>
                    <ColumnConstraints hgrow="NEVER" minWidth="100.0"/>
                    <ColumnConstraints hgrow="ALWAYS" minWidth="200.0"/>
                </columnConstraints>

                <Label text="Chá»n TÃ i sáº£n (*):" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="field-label"/>
                <ComboBox fx:id="cmbAssetList" promptText="-- Chá»n tÃ i sáº£n --" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                <Label text="NgÃ y dá»± kiáº¿n (*):" GridPane.columnIndex="2" GridPane.rowIndex="0" styleClass="field-label"/>
                <DatePicker fx:id="dpScheduledDate" maxWidth="Infinity" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                <Label text="MÃ´ táº£ cÃ´ng viá»‡c:" GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="field-label"/>
                <TextField fx:id="txtScheduleDescription" promptText="VD: Kiá»ƒm tra cÃ¡p thang mÃ¡y TÃ²a A..." GridPane.columnIndex="1" GridPane.rowIndex="1" GridPane.columnSpan="3"/>

                <Button fx:id="btnSchedule" text="âž• LÃªn Lá»‹ch Báº£o TrÃ¬" onAction="#handleScheduleMaintenance"
                        GridPane.columnIndex="3" GridPane.rowIndex="2" GridPane.halignment="RIGHT"
                        styleClass="action-button, btn-success"/>
            </GridPane>
        </children>
    </VBox>

    <VBox spacing="10.0" VBox.vgrow="ALWAYS">
        <Label text="Danh sÃ¡ch Lá»‹ch sá»­ &amp; Káº¿ hoáº¡ch" styleClass="section-title">
            <padding><Insets top="10"/></padding>
        </Label>

        <TableView fx:id="maintenanceTable" VBox.vgrow="ALWAYS">
            <columns>
                <TableColumn text="ID" prefWidth="50.0" style="-fx-alignment: CENTER;">
                    <cellValueFactory><PropertyValueFactory property="maintenanceId" /></cellValueFactory>
                </TableColumn>
                <TableColumn text="TÃ i sáº£n" prefWidth="150.0">
                    <cellValueFactory><PropertyValueFactory property="assetName" /></cellValueFactory>
                </TableColumn>
                <TableColumn text="Tráº¡ng thÃ¡i" prefWidth="120.0" style="-fx-alignment: CENTER;">
                    <cellValueFactory><PropertyValueFactory property="status" /></cellValueFactory>
                </TableColumn>
                <TableColumn text="NgÃ y LÃªn Lá»‹ch" prefWidth="120.0" style="-fx-alignment: CENTER;">
                    <cellValueFactory><PropertyValueFactory property="scheduledDate" /></cellValueFactory>
                </TableColumn>
                <TableColumn text="NgÃ y HoÃ n thÃ nh" prefWidth="120.0" style="-fx-alignment: CENTER;">
                    <cellValueFactory><PropertyValueFactory property="maintenanceDate" /></cellValueFactory>
                </TableColumn>
                <TableColumn text="MÃ´ táº£" prefWidth="250.0">
                    <cellValueFactory><PropertyValueFactory property="description" /></cellValueFactory>
                </TableColumn>
                <TableColumn text="Chi phÃ­" prefWidth="100.0" style="-fx-alignment: CENTER-RIGHT;">
                    <cellValueFactory><PropertyValueFactory property="cost" /></cellValueFactory>
                </TableColumn>
                <TableColumn text="NgÆ°á»i thá»±c hiá»‡n" prefWidth="150.0">
                    <cellValueFactory><PropertyValueFactory property="performedBy" /></cellValueFactory>
                </TableColumn>
            </columns>
            <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
        </TableView>
    </VBox>

    <HBox alignment="CENTER_RIGHT" spacing="15.0" styleClass="action-bar">
        <Label text="ðŸ’¡ Chá»n má»™t lá»‹ch cÃ³ tráº¡ng thÃ¡i 'PENDING' trong báº£ng Ä‘á»ƒ cáº­p nháº­t:" styleClass="hint-label"/>
        <Button fx:id="btnMarkAsCompleted" text="âœ… Ghi nháº­n HoÃ n thÃ nh" onAction="#handleOpenCompleteForm" disable="true"
                styleClass="action-button, btn-primary"/>
    </HBox>

</VBox>