<?xml version="1.0" encoding="UTF-8"?>

<?import io.github.palexdev.materialfx.controls.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<HBox xmlns="http://javafx.com/javafx/11.0.1"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.example.quanlytoanha.controller.ResidentDashboardController"
      prefWidth="1000.0" prefHeight="700.0"
      stylesheets="@../styles.css"
      style="-fx-font-family: 'DejaVu Sans'">

    <!-- Left Sidebar -->
    <VBox spacing="15.0" 
          prefWidth="280.0" 
          style="-fx-background-color: #21468B; -fx-padding: 35 20;">
        
        <!-- App Title -->
        <VBox alignment="CENTER" spacing="8.0" style="-fx-padding: 0 0 30 0;">
            <Label text="Building Manager" style="-fx-font-size: 19px; -fx-font-weight: bold; -fx-text-fill: white; -fx-font-family: 'DejaVu Sans';"/>
            <Label text="Resident Portal" style="-fx-font-size: 12px; -fx-text-fill: rgba(255,255,255,0.7); -fx-font-family: 'DejaVu Sans';"/>
        </VBox>
        
        <!-- Navigation Section -->
        <VBox spacing="12.0">
            
            <!-- Hóa đơn, tra cứu lịch sử -->
            <MFXButton fx:id="invoiceHistoryButton"
                      onAction="#handleInvoiceHistoryButton"
                      text="Hóa đơn, tra cứu lịch sử"
                      prefHeight="50.0"
                      maxWidth="Infinity"
                      style="-fx-background-color: rgba(255,255,255,0.15); -fx-background-radius: 10; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: 500; -fx-font-family: 'DejaVu Sans';">
            </MFXButton>

            <!-- Quản lý lịch sử đăng nhập -->
            <MFXButton fx:id="loginHistoryButton"
                      onAction="#handleLoginHistoryButton"
                      text="Quản lý lịch sử đăng nhập"
                      prefHeight="50.0"
                      maxWidth="Infinity"
                      style="-fx-background-color: rgba(255,255,255,0.15); -fx-background-radius: 10; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: 500; -fx-font-family: 'DejaVu Sans';">
            </MFXButton>

            <!-- Xem thông báo -->
            <MFXButton fx:id="notificationButton"
                      onAction="#handleNotificationButton"
                      text="Xem thông báo"
                      prefHeight="50.0"
                      maxWidth="Infinity"
                      style="-fx-background-color: rgba(255,255,255,0.15); -fx-background-radius: 10; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: 500; -fx-font-family: 'DejaVu Sans';">
            </MFXButton>
            
        </VBox>
        
        <!-- Spacer -->
        <Region VBox.vgrow="ALWAYS"/>

        <!-- Logout Button with Icon -->
        <MFXButton fx:id="btnLogout"
                  onAction="#handleLogout"
                  prefHeight="50.0"
                  maxWidth="Infinity"
                  text="Đăng xuất"
                  buttonType="RAISED"
                  style="-fx-background-color: rgba(244,67,54,0.9); -fx-background-radius: 10; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: 600; -fx-font-family: 'DejaVu Sans';">
        </MFXButton>
        
    </VBox>

    <!-- Main Content Area -->
    <VBox style="-fx-background-color: #f5f7fa; -fx-padding: 35;" VBox.vgrow="ALWAYS" HBox.hgrow="ALWAYS">
        
        <!-- Header Section -->
        <HBox alignment="CENTER_LEFT" spacing="12.0" style="-fx-padding: 0 0 30 0;">
            <VBox spacing="2.0">
                <Label fx:id="welcomeLabel" text="Welcome Back, Resident" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #1a202c; -fx-font-family: 'DejaVu Sans';"/>
                <Label text="Here's what's happening today" style="-fx-font-size: 13px; -fx-text-fill: #718096; -fx-font-family: 'DejaVu Sans';"/>
            </VBox>
        </HBox>
        
        <!-- Overview Cards -->
        <HBox spacing="20.0" style="-fx-padding: 0 0 30 0;">
            
            <!-- Outstanding Balance Card -->
            <VBox alignment="CENTER" spacing="10.0" 
                  prefWidth="210.0" prefHeight="130.0"
                  style="-fx-background-color: #667eea; -fx-background-radius: 14; -fx-effect: dropshadow(gaussian, rgba(102,126,234,0.4), 20, 0, 0, 5); -fx-padding: 20;">
                <Label text="" style="-fx-font-size: 32px;"/>
                <Label text="Current Balance" style="-fx-font-size: 12px; -fx-text-fill: white; -fx-font-weight: 500; -fx-font-family: 'DejaVu Sans';"/>
                <Label fx:id="debtAmountLabel" text="0 VND" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: white; -fx-font-family: 'DejaVu Sans';"/>
            </VBox>
            
            <!-- Monthly Payment Card -->
            <VBox alignment="CENTER" spacing="10.0" 
                  prefWidth="210.0" prefHeight="130.0"
                  style="-fx-background-color: #f093fb; -fx-background-radius: 14; -fx-effect: dropshadow(gaussian, rgba(240,147,251,0.4), 20, 0, 0, 5); -fx-padding: 20;">
                <Label text="" style="-fx-font-size: 32px;"/>
                <Label text="This Month's Payment" style="-fx-font-size: 12px; -fx-text-fill: white; -fx-font-weight: 500; -fx-font-family: 'DejaVu Sans';"/>
                <Label fx:id="paidAmountLabel" text="0 VND" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: white; -fx-font-family: 'DejaVu Sans';"/>
            </VBox>
            
            <!-- New Messages Card -->
            <VBox alignment="CENTER" spacing="10.0" 
                  prefWidth="210.0" prefHeight="130.0"
                  style="-fx-background-color: #4facfe; -fx-background-radius: 14; -fx-effect: dropshadow(gaussian, rgba(79,172,254,0.4), 20, 0, 0, 5); -fx-padding: 20;">
                <Label text="" style="-fx-font-size: 32px;"/>
                <Label text="Unread Messages" style="-fx-font-size: 12px; -fx-text-fill: white; -fx-font-weight: 500; -fx-font-family: 'DejaVu Sans';"/>
                <Label fx:id="notificationCountLabel" text="0" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: white; -fx-font-family: 'DejaVu Sans';"/>
            </VBox>
            
        </HBox>
        
        <!-- Recent Activity Section -->
        <VBox spacing="18.0" VBox.vgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="10.0">
                <Label text="Recent Activity" style="-fx-font-size: 19px; -fx-font-weight: bold; -fx-text-fill: #1a202c; -fx-font-family: 'DejaVu Sans';"/>
                <Label text="Last 7 days" style="-fx-font-size: 12px; -fx-text-fill: #a0aec0; -fx-padding: 4 12; -fx-background-color: #e2e8f0; -fx-background-radius: 12; -fx-font-family: 'DejaVu Sans';"/>
            </HBox>
            
            <!-- Activity List Container -->
            <ScrollPane fitToWidth="true" style="-fx-background-color: transparent; -fx-background: transparent;">
                <VBox spacing="0" style="-fx-background-color: white; -fx-background-radius: 14; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 12, 0, 0, 2); -fx-padding: 0;">
                    
<!--                    &lt;!&ndash; Activity Item 1 &ndash;&gt;
                    <HBox alignment="CENTER_LEFT" spacing="15.0" style="-fx-padding: 20; -fx-background-color: transparent;">
                        <VBox alignment="CENTER" prefWidth="50.0" prefHeight="50.0" style="-fx-background-color: #d4edda; -fx-background-radius: 12;">
                        </VBox>
                        <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                            <Label text="December 2023 Invoice" style="-fx-font-size: 15px; -fx-font-weight: 600; -fx-text-fill: #1a202c; -fx-font-family: 'DejaVu Sans';"/>
                            <Label text="Payment completed successfully" style="-fx-font-size: 12px; -fx-text-fill: #718096; -fx-font-family: 'DejaVu Sans';"/>
                        </VBox>
                        <VBox alignment="TOP_RIGHT" spacing="4.0">
                            <Label text="2,500,000 VND" style="-fx-font-size: 14px; -fx-font-weight: 600; -fx-text-fill: #10b981; -fx-font-family: 'DejaVu Sans';"/>
                            <Label text="Dec 15" style="-fx-font-size: 11px; -fx-text-fill: #a0aec0; -fx-font-family: 'DejaVu Sans';"/>
                        </VBox>
                    </HBox>
                    
                    <Separator style="-fx-background-color: #f1f3f5; -fx-padding: 0 20;"/>
                    
                    &lt;!&ndash; Activity Item 2 &ndash;&gt;
                    <HBox alignment="CENTER_LEFT" spacing="15.0" style="-fx-padding: 20; -fx-background-color: transparent;">
                        <VBox alignment="CENTER" prefWidth="50.0" prefHeight="50.0" style="-fx-background-color: #fff3cd; -fx-background-radius: 12;">
                        </VBox>
                        <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                            <Label text="Elevator Maintenance Notice" style="-fx-font-size: 15px; -fx-font-weight: 600; -fx-text-fill: #1a202c; -fx-font-family: 'DejaVu Sans';"/>
                            <Label text="Scheduled maintenance on Dec 20, 8AM-12PM" style="-fx-font-size: 12px; -fx-text-fill: #718096; -fx-font-family: 'DejaVu Sans';"/>
                        </VBox>
                        <Label text="Dec 10" style="-fx-font-size: 11px; -fx-text-fill: #a0aec0; -fx-font-family: 'DejaVu Sans';"/>
                    </HBox>
                    
                    <Separator style="-fx-background-color: #f1f3f5; -fx-padding: 0 20;"/>
                    
                    &lt;!&ndash; Activity Item 3 &ndash;&gt;
                    <HBox alignment="CENTER_LEFT" spacing="15.0" style="-fx-padding: 20; -fx-background-color: transparent;">
                        <VBox alignment="CENTER" prefWidth="50.0" prefHeight="50.0" style="-fx-background-color: #cfe2ff; -fx-background-radius: 12;">
                        </VBox>
                        <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                            <Label text="System Login Detected" style="-fx-font-size: 15px; -fx-font-weight: 600; -fx-text-fill: #1a202c; -fx-font-family: 'DejaVu Sans';"/>
                            <Label text="Access from IP: 192.168.1.100" style="-fx-font-size: 12px; -fx-text-fill: #718096; -fx-font-family: 'DejaVu Sans';"/>
                        </VBox>
                        <Label text="Dec 08" style="-fx-font-size: 11px; -fx-text-fill: #a0aec0; -fx-font-family: 'DejaVu Sans';"/>
                    </HBox>-->
                    
                </VBox>
            </ScrollPane>
            
        </VBox>
        
    </VBox>

</HBox>