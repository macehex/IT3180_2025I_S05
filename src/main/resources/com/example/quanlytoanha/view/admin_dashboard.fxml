<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.quanlytoanha.controller.AdminDashboardController">

    <top>
        <HBox styleClass="header-container" alignment="CENTER_LEFT" spacing="15.0">
            <children>
                <Button fx:id="btnMenuToggle" text="â˜°" styleClass="hamburger-button" onAction="#toggleSidebar" />
                <Label fx:id="lblWelcome" text="ChÃ o má»«ng, Ban Quáº£n Trá»‹" styleClass="header-title" />
                <Region HBox.hgrow="ALWAYS" />
                <Button fx:id="btnLogoutHeader" text="ðŸšª ÄÄƒng xuáº¥t" onAction="#handleLogout"
                        style="-fx-background-color: #dc3545; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-background-radius: 8; -fx-cursor: hand; -fx-padding: 10 20;">
                    <HBox.margin>
                        <Insets right="20.0" />
                    </HBox.margin>
                </Button>
            </children>
        </HBox>
    </top>

    <left>
        <VBox fx:id="sidebar" styleClass="sidebar" visible="false" managed="false">
            <children>
                <VBox styleClass="sidebar-user-section">
                    <children>
                        <Label fx:id="lblUserName" text="TÃªn NgÆ°á»i DÃ¹ng" styleClass="sidebar-user-name" />
                        <Label text="Ban Quáº£n Trá»‹" styleClass="sidebar-user-role" />
                    </children>
                    <padding>
                        <Insets top="20.0" bottom="15.0" left="20.0" right="20.0" />
                    </padding>
                </VBox>
                <Separator />

                <Button fx:id="btnThemCuDan" text="âž• ThÃªm Há»“ SÆ¡ CÆ° DÃ¢n" styleClass="sidebar-menu-item" />
                <Button fx:id="btnThemCanHo" text="ðŸ˜ï¸ ThÃªm CÄƒn Há»™" styleClass="sidebar-menu-item" onAction="#handleOpenAddApartmentForm" />
                <Button fx:id="btnQuanLyTaiKhoan" text="ðŸ‘¤ Quáº£n LÃ½ TÃ i Khoáº£n" styleClass="sidebar-menu-item" />
                <Button fx:id="btnXemDanhSachCuDan" text="ðŸ“‹ Danh SÃ¡ch CÆ° DÃ¢n" styleClass="sidebar-menu-item" onAction="#handleOpenResidentList" />

                <Separator />

                <VBox spacing="0">
                    <Button fx:id="btnMenuThongBao" text="ðŸ“¢ ThÃ´ng BÃ¡o Chung"
                            styleClass="sidebar-menu-item"
                            onAction="#toggleNotificationSubMenu"
                            maxWidth="Infinity" />

                    <VBox fx:id="vboxNotificationSubMenu" visible="false" managed="false" spacing="0">

                        <Button fx:id="btnTaoThongBao" text="âž• Táº¡o thÃ´ng bÃ¡o má»›i"
                                styleClass="sidebar-menu-item"
                                style="-fx-padding: 10 10 10 50; -fx-font-size: 13px; -fx-background-color: transparent;"
                                onAction="#handleOpenAnnouncementForm"
                                maxWidth="Infinity" alignment="BASELINE_LEFT"/>

                        <Button fx:id="btnXemThongBaoDaGui" text="ðŸ“‹ Xem DS Ä‘Ã£ gá»­i"
                                styleClass="sidebar-menu-item"
                                style="-fx-padding: 10 10 10 50; -fx-font-size: 13px; -fx-background-color: transparent;"
                                onAction="#handleOpenSentAnnouncements"
                                maxWidth="Infinity" alignment="BASELINE_LEFT"/>
                    </VBox>
                </VBox>

                <Button fx:id="btnXemYeuCauDichVu" text="ðŸ› ï¸ YÃªu Cáº§u Dá»‹ch Vá»¥" styleClass="sidebar-menu-item" />

                <Separator />

                <Button fx:id="btnQuanLyTaiSan" text="ðŸ  TÃ i Sáº£n &amp; Thiáº¿t Bá»‹" styleClass="sidebar-menu-item" onAction="#handleOpenAssetManagement" />
                <Button fx:id="btnQuanLyBaoTri" text="ðŸ”§ Lá»‹ch sá»­ Báº£o trÃ¬" styleClass="sidebar-menu-item" onAction="#handleOpenMaintenanceHistory" />

                <Button fx:id="btnBaoCaoDanCu" text="ðŸ“Š BÃ¡o cÃ¡o DÃ¢n cÆ°" styleClass="sidebar-menu-item" onAction="#handleOpenPopulationReport" />

                <Button fx:id="btnBaoCaoCongNo" text="ðŸ“ˆ BÃ¡o cÃ¡o CÃ´ng ná»£" styleClass="sidebar-menu-item" onAction="#handleOpenDebtReport" />

                <Button fx:id="btnBaoCaoTaiSan" text="ðŸ“Š BÃ¡o cÃ¡o TÃ i sáº£n" styleClass="sidebar-menu-item" onAction="#handleOpenAssetReport" />

                <Button fx:id="btnKiemSoatRaVao" text="ðŸ›¡ï¸ Kiá»ƒm soÃ¡t Ra/VÃ o" styleClass="sidebar-menu-item" onAction="#handleOpenAccessControl" />

                <Region VBox.vgrow="ALWAYS" />

                <Separator />
                <Button fx:id="btnLogout" text="ðŸšª ÄÄƒng xuáº¥t" styleClass="sidebar-logout-btn" onAction="#handleLogout">
                    <VBox.margin>
                        <Insets top="10.0" bottom="15.0" left="15.0" right="15.0" />
                    </VBox.margin>
                </Button>
            </children>
        </VBox>
    </left>

    <center>
        <ScrollPane fitToWidth="true" styleClass="scroll-pane content-area" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
            <content>
                <VBox spacing="25.0" styleClass="vbox-spacing" prefWidth="100.0">
                    <children>
                        <HBox spacing="20.0" alignment="CENTER" styleClass="hbox-spacing"
                              style="-fx-max-height: 220;">
                            <children>
                                <VBox alignment="CENTER" spacing="10.0" styleClass="stat-tile">
                                    <children>
                                        <Label text="ðŸ‘¥" styleClass="stat-icon"/>
                                        <Label fx:id="lblTotalResidents" text="0" styleClass="stat-value"/>
                                        <Label text="Tá»•ng cÆ° dÃ¢n" styleClass="stat-label"/>
                                    </children>
                                </VBox>

                                <VBox alignment="CENTER" spacing="10.0" styleClass="stat-tile">
                                    <children>
                                        <Label text="ðŸ " styleClass="stat-icon"/>
                                        <Label fx:id="lblTotalApartments" text="0" styleClass="stat-value"/>
                                        <Label text="Tá»•ng cÄƒn há»™" styleClass="stat-label"/>
                                    </children>
                                </VBox>

                                <VBox alignment="CENTER" spacing="10.0" styleClass="stat-tile">
                                    <children>
                                        <Label text="ðŸ’°" styleClass="stat-icon"/>
                                        <Label fx:id="lblTotalDebt" text="0" styleClass="stat-value"/>
                                        <Label text="CÃ´ng ná»£ (VNÄ)" styleClass="stat-label"/>
                                    </children>
                                </VBox>

                                <VBox alignment="CENTER" spacing="10.0" styleClass="stat-tile">
                                    <children>
                                        <Label text="ðŸ“‹" styleClass="stat-icon"/>
                                        <Label fx:id="lblTotalUnpaidInvoices" text="0" styleClass="stat-value"/>
                                        <Label text="HÃ³a Ä‘Æ¡n chÆ°a tráº£" styleClass="stat-label"/>
                                    </children>
                                </VBox>

                                <VBox alignment="CENTER" spacing="10.0" styleClass="stat-tile">
                                    <children>
                                        <Label text="âš ï¸" styleClass="stat-icon"/>
                                        <Label fx:id="lblAssetsInTrouble" text="0" styleClass="stat-value-warning"/>
                                        <Label text="TÃ i sáº£n cáº§n xá»­ lÃ½" styleClass="stat-label"/>
                                    </children>
                                </VBox>

                            </children>
                        </HBox>

                        <HBox spacing="30.0" alignment="CENTER" styleClass="hbox-spacing">
                            <children>
                                <VBox spacing="10.0" styleClass="chart-container">
                                    <children>
                                        <Label text="ðŸ“Š Thá»‘ng kÃª CÆ° dÃ¢n" styleClass="chart-title" />
                                        <PieChart fx:id="residentStatusPieChart"
                                                  prefWidth="400.0" prefHeight="300.0"
                                                  legendVisible="true"
                                                  labelsVisible="true"
                                                  legendSide="BOTTOM"
                                                  startAngle="90">
                                        </PieChart>
                                    </children>
                                </VBox>

                                <VBox spacing="10.0" styleClass="chart-container">
                                    <children>
                                        <Label text="ðŸ’° Sá»‘ Ná»£ ÄÃ£ Thanh ToÃ¡n" styleClass="chart-title" />
                                        <VBox alignment="CENTER" spacing="15.0" styleClass="debt-chart-container">
                                            <children>
                                                <Label fx:id="lblTotalPaid" text="0 VNÄ" styleClass="debt-paid-value" />
                                                <Label text="Tá»•ng sá»‘ tiá»n Ä‘Ã£ thanh toÃ¡n" styleClass="debt-paid-label" />
                                                <ProgressBar fx:id="debtProgressBar" prefWidth="300.0" styleClass="debt-progress" />
                                            </children>
                                        </VBox>
                                    </children>
                                </VBox>
                            </children>
                        </HBox>
                    </children>
                </VBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>