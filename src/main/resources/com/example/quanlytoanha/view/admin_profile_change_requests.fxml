<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.quanlytoanha.controller.AdminProfileChangeRequestController"
            style="-fx-background-color: #f8f9fa;">

    <top>
        <VBox>
            <HBox alignment="CENTER_LEFT" spacing="20.0"
                  style="-fx-background-color: linear-gradient(to right, #1e3c72 0%, #2a5298 100%); -fx-padding: 20;">
                <children>
                    <Label text="QUẢN LÝ YÊU CẦU THAY ĐỔI THÔNG TIN CƯ DÂN"
                           style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                </children>
            </HBox>
            
            <HBox alignment="CENTER_LEFT" spacing="15.0" style="-fx-background-color: white; -fx-padding: 15;">
                <Button fx:id="btnRefresh" text="Làm mới" onAction="#handleRefresh"
                        style="-fx-background-color: linear-gradient(to right, #1e3c72 0%, #2a5298 100%); -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 6; -fx-padding: 8 15;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="lblResultCount" text="Tổng số yêu cầu: 0"
                       style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #495057;"/>
                <Button fx:id="btnClose" text="Đóng" onAction="#handleClose"
                        style="-fx-background-color: #6c757d; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 6; -fx-padding: 8 15;"/>
            </HBox>
        </VBox>
    </top>

    <center>
        <SplitPane dividerPositions="0.4" orientation="VERTICAL" style="-fx-padding: 10;">
            
            <!-- Request List -->
            <VBox spacing="10.0" style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                <padding>
                    <Insets top="15" right="15" bottom="15" left="15"/>
                </padding>
                
                <Label text="DANH SÁCH YÊU CẦU" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #1e3c72;"/>
                
                <TableView fx:id="tableView" VBox.vgrow="ALWAYS" style="-fx-background-radius: 8;">
                    <columns>
                        <TableColumn fx:id="colRequestId" text="ID" prefWidth="60.0" style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="colRequester" text="Người yêu cầu" prefWidth="200.0"/>
                        <TableColumn fx:id="colApartment" text="Căn hộ" prefWidth="80.0" style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="colStatus" text="Trạng thái" prefWidth="120.0" style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="colCreatedAt" text="Thời gian tạo" prefWidth="150.0" style="-fx-alignment: CENTER;"/>
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                </TableView>
            </VBox>
            
            <!-- Request Details -->
            <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
                <VBox spacing="20.0" style="-fx-padding: 10;">
                    
                    <!-- Details Header -->
                    <HBox spacing="15.0" alignment="CENTER_LEFT"
                          style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                        <Label text="CHI TIẾT YÊU CẦU" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #1e3c72;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button fx:id="btnApprove" text="Phê duyệt" onAction="#handleApprove"
                                style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 6; -fx-padding: 10 20;"
                                disable="true"/>
                        <Button fx:id="btnReject" text="Từ chối" onAction="#handleReject"
                                style="-fx-background-color: #dc3545; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 6; -fx-padding: 10 20;"
                                disable="true"/>
                    </HBox>
                    
                    <!-- Comparison Table -->
                    <GridPane hgap="20.0" vgap="15.0"
                              style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                        <columnConstraints>
                            <ColumnConstraints prefWidth="150.0"/>
                            <ColumnConstraints prefWidth="250.0"/>
                            <ColumnConstraints prefWidth="250.0"/>
                        </columnConstraints>
                        
                        <!-- Headers -->
                        <Label text="Trường thông tin" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #1e3c72;" GridPane.rowIndex="0"/>
                        <Label text="Giá trị hiện tại" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #1e3c72;" GridPane.columnIndex="1"/>
                        <Label text="Giá trị mới" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #1e3c72;" GridPane.columnIndex="2"/>
                        
                        <!-- Username -->
                        <Label text="Tên đăng nhập:" style="-fx-font-weight: bold;" GridPane.rowIndex="1"/>
                        <Label fx:id="lblCurrentUsername" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                        <Label fx:id="lblNewUsername" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                        
                        <!-- Phone Number -->
                        <Label text="Số điện thoại:" style="-fx-font-weight: bold;" GridPane.rowIndex="2"/>
                        <Label fx:id="lblCurrentPhoneNumber" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                        <Label fx:id="lblNewPhoneNumber" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="2" GridPane.rowIndex="2"/>
                        
                        <!-- Email -->
                        <Label text="Email:" style="-fx-font-weight: bold;" GridPane.rowIndex="3"/>
                        <Label fx:id="lblCurrentEmail" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="1" GridPane.rowIndex="3"/>
                        <Label fx:id="lblNewEmail" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="2" GridPane.rowIndex="3"/>
                        
                        <!-- Full Name -->
                        <Label text="Họ và tên:" style="-fx-font-weight: bold;" GridPane.rowIndex="4"/>
                        <Label fx:id="lblCurrentFullName" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="1" GridPane.rowIndex="4"/>
                        <Label fx:id="lblNewFullName" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="2" GridPane.rowIndex="4"/>
                        
                        <!-- Relationship -->
                        <Label text="Quan hệ:" style="-fx-font-weight: bold;" GridPane.rowIndex="5"/>
                        <Label fx:id="lblCurrentRelationship" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="1" GridPane.rowIndex="5"/>
                        <Label fx:id="lblNewRelationship" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="2" GridPane.rowIndex="5"/>
                        
                        <!-- Date of Birth -->
                        <Label text="Ngày sinh:" style="-fx-font-weight: bold;" GridPane.rowIndex="6"/>
                        <Label fx:id="lblCurrentDateOfBirth" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="1" GridPane.rowIndex="6"/>
                        <Label fx:id="lblNewDateOfBirth" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="2" GridPane.rowIndex="6"/>
                        
                        <!-- ID Card -->
                        <Label text="CMND/CCCD:" style="-fx-font-weight: bold;" GridPane.rowIndex="7"/>
                        <Label fx:id="lblCurrentIdCardNumber" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="1" GridPane.rowIndex="7"/>
                        <Label fx:id="lblNewIdCardNumber" style="-fx-background-color: #f8f9fa; -fx-padding: 8; -fx-background-radius: 5;" GridPane.columnIndex="2" GridPane.rowIndex="7"/>
                    </GridPane>
                    
                    <!-- Admin Comment -->
                    <VBox spacing="10.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                        <Label text="Ghi chú của Admin" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #1e3c72;"/>
                        <TextArea fx:id="txtAdminComment" promptText="Nhập ghi chú cho quyết định phê duyệt/từ chối..."
                                prefRowCount="4" wrapText="true"
                                style="-fx-background-radius: 8; -fx-padding: 10;"/>
                    </VBox>
                </VBox>
            </ScrollPane>
        </SplitPane>
    </center>
</BorderPane>